(this["webpackJsonpauxswap-react"]=this["webpackJsonpauxswap-react"]||[]).push([[0],{104:function(e,t,c){},105:function(e,t,c){},107:function(e,t,c){},135:function(e,t,c){},136:function(e,t,c){},154:function(e,t,c){},155:function(e,t,c){},156:function(e,t,c){},160:function(e,t,c){},161:function(e,t,c){},178:function(e,t){},188:function(e,t,c){},189:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(0),a=c.n(n),r=c(74),o=c.n(r),i=(c(93),c(39)),l=c.n(i),u=c(75),j=c(2),d=(c(95),c(9)),b=c(5),m=c(4),h=a.a.createContext(),O=a.a.createContext(),f=(c(96),c.p+"static/media/logo_1_transparent.f6b8161d.png");var x=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("h1",{className:"head",children:"AuxSwap"}),Object(s.jsx)("img",{src:f,className:"mainLogo"}),Object(s.jsxs)("body",{className:"bod",children:["A web application using Spotify. ",Object(s.jsx)("br",{}),"Listen together and chat with your friends!"]}),Object(s.jsx)("a",{className:"Login-button",href:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"/auth/login"),children:"Login to Spotify"})]})},p=(c(97),function(e){var t={backgroundImage:"url(".concat(e.item.album.images[0].url,")")},c={width:100*e.progress_ms/e.item.duration_ms+"%"};return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)("div",{className:"main-wrapper",children:[Object(s.jsx)("div",{className:"now-playing__img",children:Object(s.jsx)("img",{src:e.item.album.images[0].url})}),Object(s.jsxs)("div",{className:"now-playing__side",children:[Object(s.jsx)("div",{className:"now-playing__name",children:e.item.name}),Object(s.jsx)("div",{className:"now-playing__artist",children:e.item.artists[0].name}),Object(s.jsx)("div",{className:"now-playing__status",children:e.is_playing?"Playing":"Paused"}),Object(s.jsx)("div",{className:"progress",children:Object(s.jsx)("div",{className:"progress__bar",style:c})})]}),Object(s.jsx)("div",{className:"background",style:t})," "]})})}),g=(c(98),c.p+"static/media/logo.6ce24c58.svg"),v=(c(99),function(){var e=a.a.useState(""),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(m.g)();return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"home-container",children:[Object(s.jsx)("input",{type:"text",placeholder:"Room",value:c,onKeyDown:function(e){13==e.keyCode&&r.push("/party/".concat(c))},onChange:function(e){n(e.target.value)},className:"text-input-field"}),Object(s.jsx)(b.b,{to:"/party/".concat(c),className:"enter-room-button",children:"Join room2"})]})})}),y=(c(104),c(105),function(e){var t=Object(n.useContext)(h),c=Object(n.useState)(""),a=Object(j.a)(c,2),r=a[0],o=a[1],i=Object(n.useState)(""),l=Object(j.a)(i,2),u=l[0],m=l[1],O=Object(n.useState)(""),f=Object(j.a)(O,2),x=f[0],p=f[1];return Object(n.useEffect)((function(e){""!==r?d.ajax({url:"https://api.spotify.com/v1/users/".concat(r),type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t.currtoken)},dataType:"json",success:function(e){e&&(void 0==typeof e||(console.log("userData: ".concat(e)),m(e.display_name),e.images.length>0?p(e.images[0].url):(m("User does not exist"),p(""))))},error:function(e){console.log(e)}}):(console.log("else"),o(""),m(""),p(""))}),[r]),Object(s.jsxs)("div",{children:[Object(s.jsx)("br",{}),Object(s.jsx)("input",{placeholder:"Search for a user",type:"search",id:"user_searchbar",autoComplete:"off",className:"user-searchbarChatUserSearch",onChange:function(){o(document.getElementById("user_searchbar").value)}}),""!==u&&""!==x?Object(s.jsx)("div",{className:"result-containerChatUserSearch",children:Object(s.jsx)("ul",{className:"result-listChatUserSearch",id:"result-listChatUserSearch",children:Object(s.jsx)("li",{className:"user-info-itemChatUserSearch",children:Object(s.jsxs)("div",{children:[Object(s.jsx)(b.b,{to:"/chat/1",children:Object(s.jsx)("img",{className:"search-imageChatUserSearch",src:x})}),Object(s.jsx)("div",{className:"user-display-nameChatUserSearch",children:u})]})})})}):null,""!==u&&""==x?Object(s.jsx)("div",{className:"result-containerChatUserSearch",children:Object(s.jsx)("ul",{className:"result-listChatUserSearch",id:"result-listChatUserSearch",children:Object(s.jsx)("li",{className:"user-info-itemChatUserSearch",children:Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"user-display-nameChatUserSearch_2",children:u})})})})}):null]})}),S=function(){var e=a.a.useState(""),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(m.g)();return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"home-container",children:[Object(s.jsx)("input",{type:"text",placeholder:"Room",value:c,onKeyDown:function(e){13===e.keyCode&&r.push("/chat/".concat(c))},onChange:function(e){n(e.target.value)},className:"text-input-field"}),Object(s.jsx)(b.b,{to:"/chat/".concat(c),className:"enter-room-button",children:"Join room"}),Object(s.jsx)(y,{})]})})},N=c(38),w=(c(107),c(27)),C=c(44),k=c(25),_=c.n(k),E="newChatMessage",A=function(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),s=c[0],a=c[1],r=Object(n.useRef)();Object(n.useEffect)((function(){return r.current=_()("http://localhost:4000",{query:{roomId:e}}),r.current.on(E,(function(e){var t=Object(C.a)(Object(C.a)({},e),{},{ownedByCurrentUser:e.senderId===r.current.id});a((function(e){return[].concat(Object(w.a)(e),[t])}))})),function(){r.current.disconnect()}}),[e]);return{messages:s,sendMessage:function(e){r.current.emit(E,{body:e,senderId:r.current.id})}}},I=(c(135),function(e){var t=Object(n.useContext)(h),c=/^(spotify:track:|https:\/\/[a-z]+\.spotify\.com\/track\/)([0-9a-z-A-Z]{22})/,r=a.a.useState(""),o=Object(j.a)(r,2),i=o[0],l=o[1],u=a.a.useState(""),b=Object(j.a)(u,2),m=b[0],O=b[1],f=a.a.useState(""),x=Object(j.a)(f,2),p=x[0],g=x[1];return Object(n.useEffect)((function(){!function(e){var s=e.match(c)[2];d.ajax({url:"https://api.spotify.com/v1/tracks/".concat(s),type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t.currtoken)},success:function(e){e||l("https://i.pinimg.com/originals/d4/e3/60/d4e3604d2811dbe178801f48e6a2ae69.jpg"),l(e.album.images[0].url),O(e.name),g(e.artists[0].name)},error:function(e){console.log(e),l("https://i.pinimg.com/originals/d4/e3/60/d4e3604d2811dbe178801f48e6a2ae69.jpg")}})}(e.message)}),[]),Object(s.jsxs)("div",{className:"song-message-container",children:[Object(s.jsx)("img",{className:"search-images",src:i}),Object(s.jsx)("div",{className:"song-name",children:m}),Object(s.jsx)("div",{className:"song-artist",children:p})]})}),D=(c(136),function(e){var t=Object(n.useContext)(h),c=a.a.useState([]),r=Object(j.a)(c,2),o=r[0],i=r[1],l=a.a.useState(""),u=Object(j.a)(l,2),b=u[0],m=u[1];var O=function(e){var t=document.getElementById("new-message-input-field");!function(e,t){var c=Object.getOwnPropertyDescriptor(e,"value").set,s=Object.getPrototypeOf(e),n=Object.getOwnPropertyDescriptor(s,"value").set;c&&c!==n?n.call(e,t):c.call(e,t)}(t,e+" "+t.value),t.dispatchEvent(new Event("input",{bubbles:!0}))};return Object(n.useEffect)((function(){o.length=0,i([]),i([]),o.length=0,""!=b&&d.ajax({url:"https://api.spotify.com/v1/search?q=".concat(b,"&type=track&limit=").concat(5,"&offset=0"),type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t.currtoken)},dataType:"json",success:function(e){e.tracks.items.forEach((function(e){i((function(t){return[].concat(Object(w.a)(t),[e])}))}))},error:function(e){console.log(e)}})}),[b]),Object(s.jsxs)("div",{children:[Object(s.jsx)("br",{}),Object(s.jsx)("input",{placeholder:"Search for a song",type:"search",id:"searchbar",autoComplete:"off",className:"song-searchbar",onChange:function(){i([]),o.length=0,m(document.getElementById("searchbar").value)}}),Object(s.jsx)("div",{className:"result-container",children:Object(s.jsx)("ul",{className:"result-list",children:o.slice(0,5).map((function(e){return Object(s.jsx)("li",{className:"song-info-list-item",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{className:"search-images",src:e.album.images[0].url,onClick:function(){O(e.external_urls.spotify),i([]),o.length=0,document.getElementById("searchbar").value=""}},e.external_urls.spotify),Object(s.jsx)("div",{className:"song-name",children:e.name}),Object(s.jsx)("div",{className:"song-artist",children:e.artists[0].name})]})})}))})})]})}),T=c(43),U=c.n(T),P=function(e){var t,c=/(spotify:track:|https:\/\/[a-z]+\.spotify\.com\/track\/)([0-9a-z-A-Z]{22})/g,r=/(http:|https:|ftp:)\/\/[a-zA-Z0-9]+[.][a-z]+\/*[^ \n]*/g,o=e.match.params.roomId,i=A(o),l=i.messages,u=i.sendMessage,d=a.a.useState(""),b=Object(j.a)(d,2),m=b[0],O=b[1],f=a.a.useState([]),x=Object(j.a)(f,2),p=x[0],g=x[1],v=Object(n.useContext)(h),y=a.a.useState(!1),S=Object(j.a)(y,2),w=S[0],C=S[1],k=a.a.useState(!1),_=Object(j.a)(k,2),E=_[0],T=_[1],P=a.a.useState(!0),L=Object(j.a)(P,2),R=L[0],z=L[1],B=a.a.useCallback((function(){return z(!R)})),K=function(){if(""!==m){u(m),H(m);var e=document.getElementById("messages-container");setTimeout((function(){e.scrollTop=1e9}),100),O("")}else O("")},H=function(e){console.log("message: ".concat(e));var t={id:o,content:e};U.a.post("http://localhost:4000/chat",t).catch((function(e){alert(e.message)}))};return Object(s.jsx)("div",{className:"chat-room-page",children:Object(s.jsxs)("div",{className:"chat-room-container",children:[Object(s.jsx)("h1",{className:"chat-room-title",children:"Chat Room"}),Object(s.jsxs)("h2",{className:"room-name",children:["Room: ",o]}),Object(s.jsx)("div",{children:Object(s.jsx)(D,{children:"SPOTIFY SEARCH"})}),Object(s.jsx)("div",{className:"messages-container",id:"messages-container",children:Object(s.jsx)("ol",{className:"messages-list",children:(t=o,R&&(U.a.get("http://localhost:4000/chat/".concat(t),{params:{id:t}},{responseType:"json"}).then((function(e){for(var t=0;t<e.data.length;t++)u(e.data[t].content)})).catch((function(e){console.log(e.type)})),B()),l.map((function(e,t){if(u=e.body,c.test(u)){var n=new Set(e.body.match(c)),a=Array.from(n),o=e.body.replace(/[ \n]*spotify:track:|https:\/\/[a-z]+\.spotify\.com\/track\/([0-9a-z-A-Z]{22})([?]si=[a-zA-Z0-9]{22})?([ \n]*)/g,""),i=""===o;return Object(s.jsxs)("div",{children:[i?null:Object(s.jsx)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:Object(s.jsx)("div",{children:o})},t),a.map((function(t,c){return Object(s.jsx)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:Object(s.jsx)("div",{onClick:function(){!function(e){var t=e.match(/(spotify:track:|https:\/\/[a-z]+\.spotify\.com\/track\/)([0-9a-z-A-Z]{22})/)[2],c="spotify:track:".concat(t);g([c])}(t),C(!0)},children:Object(s.jsx)(I,{message:t})})},c)}))]})}if(function(e){return!!r.test(e)}(e.body)){var l=e.body.split(" ");return Object(s.jsx)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:l.map((function(e,t){var c=/(http:|https:|ftp:)\/\/[a-zA-Z0-9]+[.][a-z]+\/*[^ \n]*/g.test(e);return Object(s.jsx)("div",{children:c?Object(s.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",children:[e," "]}):Object(s.jsx)("div",{children:e})},t)}))},t)}return Object(s.jsx)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:e.body},t);var u})))})}),Object(s.jsx)("textarea",{className:"new-message-input-field",value:m,onKeyDown:function(e){13===e.keyCode&&(T(!0),K())},onChange:function(e){e.preventDefault(),!0!==E&&O(e.target.value),T(!1)},placeholder:"Write message...",id:"new-message-input-field",onKeyPress:function(e){return"Enter"===e.key?K():null}}),Object(s.jsx)("button",{onClick:K,className:"send-message-button",children:"Send"}),Object(s.jsx)("div",{children:w?Object(s.jsx)("button",{onClick:function(){return C(!1)},children:Object(s.jsx)("img",{src:"https://1001freedownloads.s3.amazonaws.com/vector/thumb/70571/close-button.png",className:"x-button"})}):null}),Object(s.jsx)("div",{children:w?Object(s.jsx)(N.a,{token:v.currtoken,uris:p,autoPlay:"true",showSaveIcon:"true",name:"Auxswap"}):null})]})})};var L=function(){return Object(s.jsx)(b.a,{children:Object(s.jsxs)(m.d,{children:[Object(s.jsx)(m.b,{exact:!0,path:"/chat",component:S}),Object(s.jsx)(m.b,{exact:!0,path:"/home",component:ee}),Object(s.jsx)(m.b,{exact:!0,path:"/chat/:roomId",component:P}),Object(s.jsx)(m.b,{exact:!0,path:"/player",component:$}),Object(s.jsx)(m.b,{exact:!0,path:"/party",component:Q})]})})};c(154);function R(e){var t=Object(n.useState)(),c=Object(j.a)(t,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){r(e.members)}),[e]),Object(s.jsx)("div",{className:"userContainer",children:a?a.map((function(e){var t=e.name,c=e.data,n=e.id;return Object(s.jsxs)("div",{className:"userBlock",children:[Object(s.jsx)("img",{src:c,className:"userIcon"}),Object(s.jsx)("div",{className:"userName",children:t})]},n)})):null})}var z=c(191);c(155),c(156);function B(e){var t=e.song,c=e.setsong;return Object(s.jsx)("div",{dclassName:"result-container",children:Object(s.jsx)("ul",{className:"result-list-party",children:Object(s.jsx)("li",{className:"song-info-list-item-party",onClick:function(){t&&c(t)},children:Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{className:"search-images",src:t.image}),Object(s.jsx)("div",{className:"song-name",children:t.songName}),Object(s.jsx)("div",{className:"song-artist",children:t.artist})]})})})})}function K(e){var t=e.api,c=e.handleSongSend,a=Object(n.useState)(),r=Object(j.a)(a,2),o=r[0],i=r[1],l=Object(n.useState)(""),u=Object(j.a)(l,2),d=u[0],b=u[1],m=Object(n.useState)([]),h=Object(j.a)(m,2),O=h[0],f=h[1];function x(e){c(e),b("")}return Object(n.useEffect)((function(){t&&i(t)}),[t]),Object(n.useEffect)((function(){if(o)return d?void o.searchTracks(d).then((function(e){f(e.body.tracks.items.map((function(e){return{songName:e.name,artist:e.artists[0].name,image:e.album.images[2].url,songUrl:e.uri}})))})):f([])}),[d,o]),Object(s.jsxs)("div",{className:"search-box",children:[Object(s.jsx)(z.a,{type:"search",placeholder:"Enter song name",value:d,onChange:function(e){return b(e.target.value)}}),Object(s.jsx)("div",{className:"song-box",children:O.map((function(e){return Object(s.jsx)(B,{song:e,setsong:x},e.songUrl)}))}),Object(s.jsx)("div",{className:"decision-box"})]})}c(160);function H(e){var t=e.song;return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:t.image}),Object(s.jsx)("div",{className:"song-name",children:t.songName}),Object(s.jsx)("div",{className:"artist-name",children:t.artist})]})})}var q="song_send",J="get_top_list",F=function(e){var t=Object(n.useState)(""),c=Object(j.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(),o=Object(j.a)(r,2),i=o[0],l=o[1],u=Object(n.useState)(""),b=Object(j.a)(u,2),m=b[0],O=b[1],f=Object(n.useContext)(h),x=Object(n.useState)(),p=Object(j.a)(x,2),g=p[0],v=p[1],y=Object(n.useState)(),S=Object(j.a)(y,2),N=S[0],w=S[1],C=Object(n.useState)(),k=Object(j.a)(C,2),E=k[0],A=k[1],I=Object(n.useRef)(),D=Object(n.useState)(),T=Object(j.a)(D,2),U=T[0],P=T[1],L=Object(n.useState)(),R=Object(j.a)(L,2),z=R[0],B=R[1],K=Object(n.useState)(!1),H=Object(j.a)(K,2),F=H[0],Z=H[1];function G(e,t){d.ajax({url:"https://api.spotify.com/v1/me/player/play?device_id="+t,type:"PUT",data:'{"uris": ["'+e+'"]}',beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+f.currtoken)},success:Z(!0)})}Object(n.useEffect)((function(){window.onbeforeunload=function(){return!1},l(e.room),e.setAPi(e.spotify.setAccessToken(f.currtoken)),e.spotify.getMe().then((function(e){O(e.body.images[0].url),a(e.body.display_name)}),(function(e){console.log(e)}))}),[e.room,f.currtoken]),Object(n.useEffect)((function(){e.SDK&&P(e.SDK)}),[e.SDK]),Object(n.useEffect)((function(){e.ID&&B(e.ID)}),[e.ID]),Object(n.useEffect)((function(){U&&z&&E&&U.getCurrentState().then((function(e){if(e)return 1==e.paused&&F?(Z(!1),void M()):void(1!=e.paused||F?console.log(e):G(E.songUrl,z));F||G(E.songUrl,z)}))}),[E]),Object(n.useEffect)((function(){if(U)return""!=s&&""!=m?(I.current=_()("http://localhost:4000",{query:i}),I.current.emit("newJoin",{name:s,data:m,room:i}),I.current.on("get_room_data",(function(e){var t=e.users;v(t)})),I.current.on(q,(function(e){var t=e.songs;w(t)})),I.current.on(J,(function(e){var t=e.song;A(t)})),W(),function(){I.current.disconnect(),U.disconnect()}):void 0}),[s,m,i]);var M=function(){console.log("next...."),I.current.emit("get_next")},W=function(){var e=setInterval((function(){I.current.emit(J)}),1e3);return function(){clearInterval(e)}};return{memberlist:g,songList:N,sendSong:function(e){I.current.emit(q,{song:e})},currentSong:E}},Z=c(85),G=c.n(Z);function M(e){var t=e.handleID,c=e.SDK,a=Object(n.useContext)(h);function r(){var e=a.currtoken,s=new window.Spotify.Player({name:"Aux2",getOAuthToken:function(t){t(e)}});console.log(s),s.addListener("initialization_error",(function(e){var t=e.message;console.error(t)})),s.addListener("authentication_error",(function(e){var t=e.message;console.error(t)})),s.addListener("account_error",(function(e){var t=e.message;console.error(t)})),s.addListener("playback_error",(function(e){var t=e.message;console.error(t)})),s.addListener("ready",(function(e){var c=e.device_id;console.log("Ready with Device ID",c),t(c)})),s.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),s.connect(),c(s)}return Object(n.useEffect)((function(){window.onSpotifyWebPlaybackSDKReady=function(){r()}})),Object(s.jsx)("div",{children:Object(s.jsx)(G.a,{url:"https://sdk.scdn.co/spotify-player.js",onLoad:r})})}c(161);var W=c(86),V=new(c.n(W).a);var Y=function(e){var t=e.match.params.roomId,c=Object(n.useState)(V),a=Object(j.a)(c,2),r=a[0],o=a[1],i=Object(n.useState)(),l=Object(j.a)(i,2),u=l[0],d=l[1],b=Object(n.useState)([]),m=Object(j.a)(b,2),h=m[0],O=m[1],f=Object(n.useState)(),x=Object(j.a)(f,2),p=x[0],g=x[1],v=Object(n.useState)(),y=Object(j.a)(v,2),S=y[0],N=y[1],w=F({room:t,spotify:r,setAPi:o,SDK:S,ID:p});return Object(n.useEffect)((function(){w.songList&&O(w.songList)}),[w.songList]),Object(n.useEffect)((function(){d(w.memberlist)}),[w.memberlist]),Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"party-room-container",children:[Object(s.jsx)("h1",{className:"party-room-title",children:"Party room"}),Object(s.jsxs)("h2",{className:"party-room-name",children:["Room: ",t]}),Object(s.jsxs)("div",{className:"user-container",children:[Object(s.jsx)("h3",{className:"user-title",children:"Active Users"}),Object(s.jsx)(R,{members:u})]}),Object(s.jsx)("div",{className:"Search-Bar",children:Object(s.jsx)(K,{api:r,handleSongSend:function(e){w.sendSong(e)}})}),Object(s.jsx)("div",{className:"song-container",children:h.map((function(e){return Object(s.jsx)(H,{song:e},e.songUrl)}))}),Object(s.jsx)(M,{handleID:function(e){g(e)},SDK:function(e){N(e)}})]})})};var Q=function(){return Object(s.jsx)(b.a,{children:Object(s.jsxs)(m.d,{children:[Object(s.jsx)(m.b,{exact:!0,path:"/party",component:v}),Object(s.jsx)(m.b,{exact:!0,path:"/party/:roomId",component:Y}),Object(s.jsx)(m.b,{exact:!0,path:"/player",component:$}),Object(s.jsx)(m.b,{exact:!0,path:"/chat",component:L})]})})};c(73),c(188);var X=function(e){var t=a.a.useState(""),c=Object(j.a)(t,2),r=c[0],o=c[1],i=a.a.useState(""),l=Object(j.a)(i,2),u=l[0],d=l[1];return Object(n.useEffect)((function(){o(e.displayname),d(e.imageurl)}),[e.imageurl,e.displayname]),Object(s.jsxs)("nav",{className:"navClass",children:[Object(s.jsx)("div",{}),Object(s.jsxs)("ul",{className:"navList",children:[Object(s.jsx)("li",{className:"navListElementsLogo",children:Object(s.jsx)(b.c,{to:"/home",children:Object(s.jsx)("img",{src:f,className:"navLogo"})})}),Object(s.jsx)("li",{className:"navListElements",children:Object(s.jsx)(b.c,{to:"/chat",children:" Chat "})}),Object(s.jsx)("li",{className:"navListElements",children:Object(s.jsx)(b.c,{to:"/party",children:" Party "})}),Object(s.jsxs)("div",{className:"userNav",children:[Object(s.jsx)("li",{children:Object(s.jsx)("img",{className:"navImage",src:u})}),Object(s.jsxs)("li",{className:"displayName",children:[" ",r," "]})]})]})]})};var $=function(){var e=Object(n.useContext)(h),t=a.a.useState({album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0}),c=Object(j.a)(t,2),r=c[0],o=c[1],i=a.a.useState("Paused"),l=Object(j.a)(i,2),u=l[0],b=l[1],m=a.a.useState(0),O=Object(j.a)(m,2),f=O[0],x=O[1],v=a.a.useState(!1),y=Object(j.a)(v,2),S=y[0],N=y[1],w=a.a.useState(!1),C=Object(j.a)(w,2),k=C[0],_=C[1];return Object(n.useEffect)((function(){d.ajax({url:"https://api.spotify.com/v1/me/player",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e.currtoken)},success:function(e){e?(o(e.item),b(e.is_playing),x(e.progress_ms),N(!1)):N(!0)},error:function(e){console.log(e),N(!0),_(!0)}})}),[e.currtoken]),Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(X,{}),Object(s.jsxs)("header",{className:"App-header",children:[Object(s.jsx)("img",{src:g,className:"App-logo",alt:"logo"}),!S&&Object(s.jsx)(p,{item:r,is_playing:u,progress_ms:f}),S&&k&&Object(s.jsx)("p",{children:"Uh oh! An error occurred when making contact with the API :("}),S&&!k&&Object(s.jsx)("p",{children:"Are you logged into Spotify? Make sure you are logged in AND that something is playing."})]})]})};var ee=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("header",{className:"head1",children:"Welcome to AuxSwap!"}),Object(s.jsx)("img",{src:f,className:"logoHome"}),Object(s.jsxs)("div",{class:"row",children:[Object(s.jsx)(b.c,{to:"/chat",children:Object(s.jsxs)("div",{class:"column",children:[Object(s.jsx)("h2",{className:"head2",children:"Chat"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"bullets",children:"Chat with friends"}),Object(s.jsx)("li",{className:"bullets",children:"Search and share songs"}),Object(s.jsx)("li",{className:"bullets",children:"Play songs directly in the chat"})]})]})}),Object(s.jsx)(b.c,{to:"/party",children:Object(s.jsxs)("div",{class:"column2",children:[Object(s.jsx)("h2",{className:"head2",children:"Party Lobbies"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"bullets",children:"Join lobbies to listen together"}),Object(s.jsx)("li",{className:"bullets",children:"Add songs to the queue"}),Object(s.jsx)("li",{className:"bullets",children:"Hear new music and share with your friends"})]})]})})]})]})};var te=function(e){return Object(n.useEffect)((function(){var t=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var c=t.split("=");e[c[0]]=decodeURIComponent(c[1]),console.log(decodeURIComponent(c[1]))}return e}),{}),c=t.access_token,s=t.refresh_token;c&&s?e.updateToken(c,s):c&&e.JustToken(c)}),[e]),null};var ce=function(){var e=a.a.useState(null),t=Object(j.a)(e,2),c=t[0],r=t[1],o=a.a.useState(null),i=Object(j.a)(o,2),f=i[0],p=i[1],g=a.a.useState(""),v=Object(j.a)(g,2),y=v[0],S=v[1],N=a.a.useState(""),w=Object(j.a)(N,2),C=w[0],k=w[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.ajax({url:"https://api.spotify.com/v1/me",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(e){e||console.log("null values"),S(e.display_name),k(e.images[0].url)},error:function(e){console.log("IN GET DATA ERROR",t),console.log(e)}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=window.sessionStorage.getItem("token"),c=window.sessionStorage.getItem("refresh");t&&(r(t),e(t),c&&p(c))}),[]),Object(s.jsx)(h.Provider,{value:{currtoken:c},children:Object(s.jsx)(O.Provider,{value:{refreshcurrtoken:f},children:Object(s.jsx)(b.a,{children:Object(s.jsxs)(m.d,{children:[Object(s.jsx)(m.b,{exact:!0,path:"/",children:c?Object(s.jsx)(m.a,{to:"/home"}):Object(s.jsx)(x,{})}),Object(s.jsx)(m.b,{exact:!0,path:"/home",children:c?Object(s.jsxs)("div",{children:[" ",Object(s.jsx)(X,{displayname:y,imageurl:C}),Object(s.jsx)(ee,{})," "]}):Object(s.jsx)(m.a,{to:"/"})}),Object(s.jsx)(m.b,{path:"/callback",children:c?Object(s.jsx)(m.a,{to:"/home"}):Object(s.jsx)(te,{updateToken:function(e,t){window.sessionStorage.setItem("token",e),window.sessionStorage.setItem("refresh",t),r(e),p(t)},JustToken:function(e){window.sessionStorage.setItem("token",e),r(e)}})}),Object(s.jsxs)(m.b,{exact:!0,path:"/chat",children:[Object(s.jsx)(X,{displayname:y,imageurl:C})," ",Object(s.jsx)(L,{})]}),Object(s.jsxs)(m.b,{exact:!0,path:"/party",children:[Object(s.jsx)(X,{displayname:y,imageurl:C})," ",Object(s.jsx)(Q,{})]})]})})})})},se=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,192)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),s(e),n(e),a(e),r(e)}))};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(ce,{})}),document.getElementById("root")),se()},73:function(e,t,c){},93:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[189,1,2]]]);
//# sourceMappingURL=main.4f53402d.chunk.js.map